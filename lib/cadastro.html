<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cadastro</title>
  <link rel="stylesheet" href="style/auth.css">

  <!-- Firebase SDKs (modo compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

  <script>
    // Configuração do Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDa5dqtuV2sTVh07NZafHVlYBO0EtvryUM",
      authDomain: "agrovale-c4ce6.firebaseapp.com",
      projectId: "agrovale-c4ce6",
      storageBucket: "agrovale-c4ce6.appspot.com",
      messagingSenderId: "292420787522",
      appId: "1:292420787522:web:6bee092a1fcd877a257cdb",
      measurementId: "G-K4E7781SQ6"
    };

    // Inicializa o Firebase
    firebase.initializeApp(firebaseConfig);

    // Função para cadastrar usuário
    function cadastrarUsuario(event) {
      event.preventDefault();

      const email = document.getElementById("email").value;
      const senha = document.getElementById("senha").value;
      const confirmarSenha = document.getElementById("confirmarSenha").value;

      if (senha.length < 6) {
      alert("A senha deve ter no mínimo 6 caracteres.");
      return;
      }


      if (senha !== confirmarSenha) {
        alert("As senhas não coincidem.");
        return;
      }

      firebase.auth().createUserWithEmailAndPassword(email, senha)
        .then((userCredential) => {
          console.log("Usuário cadastrado:", userCredential.user);
          alert("Cadastro realizado com sucesso!");
          sessionStorage.setItem("usuarioLogado", true);
          window.location.href = "index.html";
        })
        .catch((error) => {
          alert("Erro ao cadastrar: " + error.message);
          console.error(error);
        });
    }
  </script>
</head>
<body>
  <div class="wrapper">
    <form onsubmit="cadastrarUsuario(event)">
      <h2>Cadastre-se</h2>

      <div class="input-field">
        <input type="text" id="email" required />
        <label>Insira seu email</label>
      </div>

      <div class="input-field">
        <input type="password" id="senha" required />
        <label>Insira sua senha</label>
      </div>

      <div class="input-field">
        <input type="password" id="confirmarSenha" required />
        <label>Confirme sua senha</label>
      </div>

      <div class="forget">
        <label for="remember">
          <input type="checkbox" id="remember" />
          <p>Lembre de mim</p>
        </label>
      </div>

      <button type="submit">Cadastrar</button>

      <div class="register">
        <p>Já tem uma conta? <a href="login.html">Entrar</a></p>
      </div>
    </form>
  </div>
</body>
</html>
